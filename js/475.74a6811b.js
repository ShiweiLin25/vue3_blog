"use strict";(self["webpackChunkblog"]=self["webpackChunkblog"]||[]).push([[475],{4475:function(e,t,o){o.r(t),o.d(t,{default:function(){return L}});var n=o(6768),s=o(4232),i=o(5130);const l={class:"my-8 container mx-auto"},r={class:"grid sm:grid-cols-2 md:grid-cols-3 lg:grid-cols-4 gap-10"},c=["onClick"],a={class:"card-body px-5 flex flex-col justify-between"},u={class:"flex-grow truncate"},d={class:"card-actions justify-center"},g=["onClick"],b=["onClick"],w={key:0,class:"fixed inset-0 bg-gray-500 bg-opacity-50 flex justify-center items-center"},v={class:"bg-white p-5 w-3/4 md:w-1/2 rounded-lg"},f=["innerHTML"],p={class:"mt-4 flex justify-end"};function k(e,t,o,k,y,h){return(0,n.uX)(),(0,n.CE)("div",l,[(0,n.Lk)("div",r,[((0,n.uX)(!0),(0,n.CE)(n.FK,null,(0,n.pI)(k.items,((e,t)=>((0,n.uX)(),(0,n.CE)("div",{class:"mx-auto",key:t},[(0,n.Lk)("div",{class:"card bg-base-100 shadow-xl h-30 w-40 cursor-pointer hover:scale-105 transition-transform duration-200",onClick:t=>k.openPreview(e)},[(0,n.Lk)("div",a,[(0,n.Lk)("p",u,(0,s.v_)(k.getText(e.get("text"))),1),(0,n.Lk)("div",d,[(0,n.Lk)("button",{class:"btn btn-success btn-outline btn-sm",onClick:(0,i.D$)((t=>k.goToEditPage(e.id)),["stop"])}," 修改 ",8,g),(0,n.Lk)("button",{class:"btn btn-error btn-outline btn-sm",onClick:(0,i.D$)((t=>k.deletePost(e.id)),["stop"])},"刪除",8,b)])])],8,c)])))),128))]),k.previewVisible?((0,n.uX)(),(0,n.CE)("div",w,[(0,n.Lk)("div",v,[t[2]||(t[2]=(0,n.Lk)("h2",{class:"text-xl font-bold"},"文章預覽",-1)),(0,n.Lk)("div",{innerHTML:k.previewContent,class:"max-h-96 overflow-y-auto"},null,8,f),(0,n.Lk)("div",p,[(0,n.Lk)("button",{onClick:t[0]||(t[0]=(...e)=>k.closePreview&&k.closePreview(...e)),class:"btn btn-sm btn-outline"},"關閉")])])])):(0,n.Q3)("",!0),(0,n.bo)((0,n.Lk)("button",{onClick:t[1]||(t[1]=(...e)=>k.scrollToTop&&k.scrollToTop(...e)),class:"fixed bottom-4 right-4 bg-gray-400 text-white px-2 py-2 rounded-full hover:bg-gray-500 transition"}," ↑ ",512),[[i.aG,k.showBackToTop]])])}o(4114),o(8111),o(116);var y=o(144),h=o(3243),m=o(1387),x={name:"HomeView",setup(){const e=(0,m.rd)(),t=(0,y.KR)([]),o=(0,y.KR)(!1),s=(0,y.KR)(""),i=(0,y.KR)(!1);async function l(){try{const e=new h.Parse.Query("Blog");t.value=await e.find()}catch(e){console.log(e)}}function r(e){let t=e.replace(/<\/?[^>]+>/gi,"");var o=t.length>10?t.substring(0,10)+" ...":t;return o}async function c(e){if(confirm("確定要刪除這篇文章嗎？"))try{const t=new h.Parse.Query("Blog"),o=await t.get(e);await o.destroy(),alert("刪除成功！"),await l()}catch(t){console.error("刪除失敗:",t),alert("刪除失敗："+t.message)}}function a(e){s.value=e.get("text"),o.value=!0}function u(){o.value=!1}function d(){window.scrollTo({top:0,behavior:"smooth"})}function g(){i.value=window.scrollY>50}function b(t){e.push({path:"/post",query:{id:t}})}return(0,n.sV)((()=>{l(),window.addEventListener("scroll",g)})),{items:t,previewVisible:o,previewContent:s,showBackToTop:i,getText:r,deletePost:c,openPreview:a,closePreview:u,scrollToTop:d,goToEditPage:b}}},T=o(1241);const C=(0,T.A)(x,[["render",k]]);var L=C}}]);
//# sourceMappingURL=475.74a6811b.js.map