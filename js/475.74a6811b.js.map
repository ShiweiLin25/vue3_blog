{"version":3,"file":"js/475.74a6811b.js","mappings":"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","sources":["webpack://blog/./src/views/HomeView.vue","webpack://blog/./src/views/HomeView.vue?1da1"],"sourcesContent":["<template>\r\n    <!-- 外層容器，設定上下邊距、寬度及內邊距 -->\r\n    <div class=\"my-8 container mx-auto\">\r\n        <!-- 使用 grid 排版，當螢幕尺寸較大時改為三欄顯示 -->\r\n        <div class=\"grid sm:grid-cols-2 md:grid-cols-3 lg:grid-cols-4 gap-10 \">\r\n            <!-- v-for 迴圈遍歷 items 陣列，並且為每個項目創建一個 div 元素 -->\r\n            <div class=\"mx-auto\" v-for=\"(item, index) in items\" :key=\"index\">\r\n                <!-- 卡片樣式，加入陰影效果 -->\r\n                <div class=\"card bg-base-100 shadow-xl h-30 w-40  cursor-pointer hover:scale-105 transition-transform duration-200\"\r\n                    @click=\"openPreview(item)\">\r\n                    <div class=\"card-body px-5 flex flex-col justify-between\">\r\n                        <!-- 顯示處理過的文本內容，getText 用來去除 HTML 標籤並縮短文字 -->\r\n                        <p class=\"flex-grow truncate\">{{ getText(item.get('text')) }}</p>\r\n                        <div class=\"card-actions justify-center\">\r\n                            <!-- 修改按鈕 -->\r\n                            <button class=\"btn btn-success btn-outline btn-sm\" @click.stop=\"goToEditPage(item.id)\">\r\n                                修改\r\n                            </button>\r\n                            <!-- 刪除按鈕 -->\r\n                            <button class=\"btn btn-error btn-outline btn-sm\"\r\n                                @click.stop=\"deletePost(item.id)\">刪除</button>\r\n                        </div>\r\n                    </div>\r\n                </div>\r\n            </div>\r\n        </div>\r\n        <!-- 預覽視窗 -->\r\n        <div v-if=\"previewVisible\" class=\"fixed inset-0 bg-gray-500 bg-opacity-50 flex justify-center items-center\">\r\n            <div class=\"bg-white p-5 w-3/4 md:w-1/2 rounded-lg\">\r\n                <h2 class=\"text-xl font-bold\">文章預覽</h2>\r\n                <div v-html=\"previewContent\" class=\"max-h-96 overflow-y-auto\"></div>\r\n                <div class=\"mt-4 flex justify-end\">\r\n                    <button @click=\"closePreview\" class=\"btn btn-sm btn-outline\">關閉</button>\r\n                </div>\r\n            </div>\r\n        </div>\r\n        <!-- 返回頂部按鈕 -->\r\n        <button v-show=\"showBackToTop\" @click=\"scrollToTop\"\r\n            class=\"fixed bottom-4 right-4 bg-gray-400 text-white px-2 py-2 rounded-full hover:bg-gray-500 transition\">\r\n            ↑\r\n        </button>\r\n    </div>\r\n</template>\r\n\r\n<script>\r\n// 從 Vue 引入 ref 和 onMounted\r\nimport { ref, onMounted } from 'vue';\r\n// 引入 Parse 庫，讓我們能從 Parse 伺服器獲取資料\r\nimport { Parse } from 'parse/dist/parse.min.js';\r\n// 引入 useRouter\r\nimport { useRouter } from 'vue-router';\r\nexport default {\r\n    // 組件名稱設定為 HomeView\r\n    name: 'HomeView',\r\n    setup() {\r\n        // 使用 router\r\n        const router = useRouter();\r\n        // 宣告 items 變數，用來儲存從伺服器取得的資料\r\n        const items = ref([]);\r\n        // 控制模態視窗顯示\r\n        const previewVisible = ref(false);\r\n        // 存儲預覽內容\r\n        const previewContent = ref('');\r\n        // 控制是否顯示返回頂部按鈕\r\n        const showBackToTop = ref(false);\r\n\r\n        // 定義一個異步函式來從 Parse 資料庫中取得 Blog 資料\r\n        async function getData() {\r\n            try {\r\n                // 建立對 \"Blog\" 資料表的查詢\r\n                const query = new Parse.Query(\"Blog\");\r\n                // 執行查詢並將結果儲存在 items 變數中\r\n                items.value = await query.find();\r\n            }\r\n            catch (error) {\r\n                // 捕捉錯誤並輸出到控制台\r\n                console.log(error);\r\n            }\r\n        }\r\n\r\n        // 用來處理從資料庫中取出的 text 資料，將 HTML 標籤去除並限制字數\r\n        function getText(text) {\r\n            // 去除 HTML 標籤\r\n            let temp = text.replace(/<\\/?[^>]+>/ig, \"\"); \r\n            // 如果長度大於 10 才加省略符號\r\n            var trimmedString = temp.length > 10 ? temp.substring(0, 10) + \" ...\" : temp; \r\n            return trimmedString;\r\n        }\r\n\r\n        // 刪除文章\r\n        async function deletePost(id) {\r\n            // 確認是否刪除\r\n            if (!confirm(\"確定要刪除這篇文章嗎？\")) return;\r\n\r\n            try {\r\n                const query = new Parse.Query(\"Blog\");\r\n                const blog = await query.get(id);\r\n                await blog.destroy();\r\n                alert(\"刪除成功！\");\r\n\r\n                // 重新取得文章列表，確保畫面更新\r\n                await getData();\r\n            } catch (error) {\r\n                console.error(\"刪除失敗:\", error);\r\n                alert(\"刪除失敗：\" + error.message);\r\n            }\r\n        }\r\n\r\n        // 點擊卡片時，打開預覽視窗\r\n        function openPreview(item) {\r\n            // 設定預覽內容\r\n            previewContent.value = item.get('text');\r\n            // 顯示預覽視窗\r\n            previewVisible.value = true;\r\n        }\r\n\r\n        // 關閉預覽視窗\r\n        function closePreview() {\r\n            // 隱藏預覽視窗\r\n            previewVisible.value = false;\r\n        }\r\n\r\n        // 滾動到頂部\r\n        function scrollToTop() {\r\n            window.scrollTo({ top: 0, behavior: 'smooth' });\r\n        }\r\n\r\n        // 滾動事件監聽，當滾動超過一定距離時顯示返回頂部按鈕\r\n        function handleScroll() {\r\n            showBackToTop.value = window.scrollY > 50; // 滾動超過 50px 顯示按鈕\r\n        }\r\n        // 導向編輯頁面\r\n        function goToEditPage(id) {\r\n            router.push({ path: '/post', query: { id: id } }); // 使用 router 進行頁面跳轉\r\n        }\r\n        // 使用 onMounted 生命週期函數，當組件掛載後會自動執行 getData 來獲取資料\r\n        onMounted(() => {\r\n            getData();\r\n            // 監聽滾動事件\r\n            window.addEventListener('scroll', handleScroll);\r\n        });\r\n\r\n        // 返回 items 和 getText，讓模板可以使用\r\n        return {\r\n            items,\r\n            previewVisible,\r\n            previewContent,\r\n            showBackToTop,\r\n            getText,\r\n            deletePost,\r\n            openPreview,\r\n            closePreview,\r\n            scrollToTop,\r\n            goToEditPage\r\n        }\r\n    }\r\n}\r\n</script>\r\n","import { render } from \"./HomeView.vue?vue&type=template&id=5d6919bf\"\nimport script from \"./HomeView.vue?vue&type=script&lang=js\"\nexport * from \"./HomeView.vue?vue&type=script&lang=js\"\n\nimport exportComponent from \"../../node_modules/vue-loader/dist/exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['render',render]])\n\nexport default __exports__"],"names":["class","key","_createElementBlock","_hoisted_1","_createElementVNode","_hoisted_2","_Fragment","_renderList","$setup","items","item","index","onClick","$event","openPreview","_hoisted_4","_hoisted_5","_toDisplayString","getText","get","_hoisted_6","_withModifiers","goToEditPage","id","_hoisted_7","deletePost","_hoisted_8","_hoisted_3","previewVisible","_hoisted_9","_hoisted_10","innerHTML","previewContent","_hoisted_11","_hoisted_12","_cache","args","closePreview","_createCommentVNode","scrollToTop","showBackToTop","name","setup","router","useRouter","ref","async","getData","query","Parse","Query","value","find","error","console","log","text","temp","replace","trimmedString","length","substring","confirm","blog","destroy","alert","message","window","scrollTo","top","behavior","handleScroll","scrollY","push","path","onMounted","addEventListener","__exports__","render"],"sourceRoot":""}